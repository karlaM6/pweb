<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::section})}">
<body>
<section>
    <h2 style="text-align: center; color: #2563eb; margin-bottom: 30px;">🏁 ¡Navegando la Regata!</h2>
    
    <!-- Game Info -->
    <div style="background: white; padding: 15px; margin: 15px 0; border-radius: 12px; box-shadow: 0 6px 24px rgba(0,0,0,0.1);">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-weight: 600; color: #10b981;">⛵ Navegante: <span th:text="${player.displayName}">Player</span></span>
            <span style="font-weight: 600; color: #8b5cf6;">🚢 Barco: <span th:text="${boat.model.name}">Boat</span></span>
            <span style="font-weight: 600; color: #f59e0b;">🗺️ Curso: <span th:text="${gameMap.name}">Map</span></span>
        </div>
    </div>

    <!-- Game Board -->
    <div style="background: white; padding: 25px; margin: 25px 0; border-radius: 16px; box-shadow: 0 8px 32px rgba(0,0,0,0.1);">
        <h3 style="color: #2563eb; text-align: center; margin-bottom: 20px;">🌊 Campo de Regata</h3>
        
        <div style="display: flex; justify-content: center; margin-bottom: 20px;">
            <div id="raceGrid" style="display: grid; gap: 2px; background: #0ea5e9; padding: 10px; border-radius: 12px;">
                <!-- Game grid will be generated here -->
            </div>
        </div>
        
        <!-- Controls -->
        <div style="text-align: center; margin: 20px 0;">
            <h4 style="color: #8b5cf6; margin-bottom: 15px;">🎮 Controles de Navegación</h4>
            <div style="display: flex; justify-content: center; gap: 10px;">
                <button onclick="moveBoat('up')" style="background: #3b82f6; color: white; padding: 15px 20px; border: none; border-radius: 8px; font-size: 18px; cursor: pointer;">⬆️ Norte</button>
                <button onclick="moveBoat('down')" style="background: #3b82f6; color: white; padding: 15px 20px; border: none; border-radius: 8px; font-size: 18px; cursor: pointer;">⬇️ Sur</button>
                <button onclick="moveBoat('left')" style="background: #3b82f6; color: white; padding: 15px 20px; border: none; border-radius: 8px; font-size: 18px; cursor: pointer;">⬅️ Oeste</button>
                <button onclick="moveBoat('right')" style="background: #3b82f6; color: white; padding: 15px 20px; border: none; border-radius: 8px; font-size: 18px; cursor: pointer;">➡️ Este</button>
            </div>
        </div>

        <!-- Game Status -->
        <div id="gameStatus" style="text-align: center; padding: 15px; background: #f0f9ff; border-radius: 8px; margin-top: 20px;">
            <p style="margin: 0; color: #0c4a6e; font-weight: 600;">Estado: <span id="statusText">¡Navegando hacia la victoria!</span></p>
        </div>
    </div>

    <!-- Back to Lobby -->
    <div style="text-align: center; margin: 20px 0;">
        <a href="/game" style="background: #6b7280; color: white; padding: 12px 25px; text-decoration: none; border-radius: 8px; font-weight: 600;">
            🏠 Volver al Lobby
        </a>
    </div>

    <!-- Backend data for sailing game -->
    <script type="text/javascript">
    // Make backend data available to app.js
    window.sailingGameData = {
        grid: /*[[${gameMap.grid}]]*/ 'P              \n XXXXXXXXXXXXX \n XX           X\n XX           X\n XXXX         X\n              X\n XX           X\n             M ',
        width: /*[[${gameMap.width}]]*/ 15,
        height: /*[[${gameMap.height}]]*/ 8,
        player: {
            name: /*[[${player.displayName}]]*/ 'Player 1',
            id: /*[[${player.id}]]*/ 1
        },
        boat: {
            name: /*[[${boat.model.name}]]*/ 'Sailing Boat',
            color: /*[[${boat.model.colorHex}]]*/ '#3b82f6'
        }
    };
    console.log('🎯 Backend game data loaded:', window.sailingGameData);
    </script>
</section>
</body>
</html>